var _gaq=_gaq||[],google={sites:"https://sites.google.com/feeds/content/",script:function(a){return"https://script.google.com/macros/s/"+a+"/exec"}},config={assets:"assets/",app:jQuery("script[src*='app']").attr("src").split("app")[0]+"app/",endpoint:google.script("AKfycbwVjVHpBPOR6AjYCmf1NoVsM7KWuYn-CE53CSESR3OzZWWPW9LP"),site:google.sites+"hypeideas.co/"};jQuery(document).ready(function(){$=jQuery.noConflict(),_gaq.push(["_trackPageview"]);var a=_.once(App.init);a()}),App=kendo.observable({Model:{},VO:{},Utils:{},history:[],router:new kendo.Router,source:new kendo.data.DataSource({autobind:!1,schema:{parse:function(a){return _.map(a.feed.entry,function(a){var b=null,c=null,d=null,e=a.content.$t,f=null,g={facebook:{src:"",url:""},twitter:{src:"",url:""},instagram:{src:"",url:""}},h=null,i="",j=null,k=null;return $(e).find("img").each(function(){switch($(this).attr("alt")){case"background":c=$(this).attr("src");break;case"cloud":d=$(this).attr("src");break;case"facebook":g.facebook.src=$(this).attr("src"),g.facebook.url=this.parentElement.href;break;case"twitter":g.twitter.src=$(this).attr("src"),g.twitter.url=this.parentElement.href;break;case"instagram":g.instagram.src=$(this).attr("src"),g.instagram.url=this.parentElement.href;break;case"elements":f=$(this).attr("src");break;case"start":h=$(this).attr("src");break;case"taxi":i=$(this).attr("src");break;case"thumbnails":j=$(this).attr("src");break;case"welcome":k=$(this).attr("src")}}),b=App.parseUrlSection(a.title.$t.split(".")[1]),{anchor:b,background:c,cloud:d,content:$(e).find("[dir='ltr']").html(),element:f,href:"#"+b,icon:"icon fa-"+$(e).find("code").text(),label:a.title.$t.split(".")[1],position:a.title.$t.split(".")[0],socialNetworks:g,start:h,taxi:i,thumbnails:j,title:a.title.$t,welcome:k}})}},transport:{read:{cache:!0,url:config.site+"app?alt=json&kind=webpage",dataType:"jsonp",crossDomain:!0}}}),init:function(){App.source.fetch(function(){App.router.start(),App.loadModule({name:"public"})})},addScript:function(a,b,c,d){var e=document.createElement("script");e.type="text/javascript",e.async=c,e.src=void 0==d?b:b+"&callback="+d,$(a).append(e)},loadModule:function(a){var b=App.ucwords(a.name,!0,!0),c=config.app+"modules/"+App.ucwords(a.name,!0,!1)+"/",d=!_.isUndefined($(a.name+"-module").get(0));d?$("body").html($(a.name+"-module").get(0)):$("body").load(c+b+".html",function(){_.has(App.Model[b],"init")&&App.Model[b].init(),_.has(App.Model[b],a.action)&&App.Model[b][a.action].apply(this,a.params),kendo.bind($(a.name+"-module").get(0),App.Model[b])})},parseUrlSection:function(a){var b=unescape("ãàáäâèéëêìíïîòóöôùúüûñç&"),c="aaaaaeeeeiiiioooouuuuncy";word=a.toLowerCase().replace(/\s/g,"-");for(var d=0;d<b.length;d++)word=word.replace(b.charAt(d),c.charAt(d));return word},ucwords:function(a,b,c){return(a.toLowerCase()+"").replace(/^([a-z])|\s+([a-z])/g,function(a){return a=c?a.toUpperCase():a.toLowerCase(),b?a.replace(/\s/g,""):a})}});var Hype=Hype||{};Hype.Style=kendo.Class.extend({init:function(){},setTable:function(a){$("table").addClass("table table-striped table-hover"),_.each($("tbody").children(),function(b,c){c%2==0&&$(b).addClass(a)})}}),kendo.data.binders.notification=kendo.data.Binder.extend({init:function(a,b,c){kendo.data.Binder.fn.init.call(this,a,b,c);var d=$(a);this.success=d.data("success"),this.error=d.data("error")},refresh:function(){var a="alert-info"==this.bindings.notification.get();$(this.element).addClass(a?this.success:this.error),$(this.element).removeClass(a?this.error:this.success)}}),kendo.data.binders.twitchToggle=kendo.data.Binder.extend({init:function(a,b,c){kendo.data.Binder.fn.init.call(this,a,b,c);var d=$(a);this.openState=d.data("openState"),this.closeState=d.data("closeState")},refresh:function(){"nav-open"==this.bindings.twitchToggle.get().split(" ")[1]?($(this.element).addClass(this.openState),$(this.element).removeClass(this.closeState)):($(this.element).addClass(this.closeState),$(this.element).removeClass(this.openState))}}),App.Model.Public=kendo.observable({animated:{isComplete:!0},area:window.innerWidth*window.innerHeight,cloud:{opacity:0,position:0},contact:{isVisible:!1,names:null,email:null,message:null},detail:{isVisible:!1,cloud:null},menu:{data:[],isVisible:!1},modal:{title:"",body:"",footer:""},parallax:{source:new kendo.data.DataSource({data:[]}),isVisible:!0},response:{state:"alert-info",text:""},scale:"100%",selectedItem:{anchor:null,content:null,icon:null,label:null,thumbnails:null},socialNetworks:{height:.18*window.innerHeight,width:.04*window.innerWidth,isVisible:!1,facebook:{src:"",url:""},twitter:{src:"",url:""},instagram:{src:"",url:""}},start:{html:"",isVisible:!0,src:null},stateButton:"glyphicon-chevron-left nav-close",taxi:{height:.35*window.innerHeight,isVisible:!1,src:"",width:.1*window.innerWidth},timer:null,width:window.innerWidth,height:window.innerHeight,init:function(){App.Model.Public.settings(),$(window).bind("resize",App.Model.Public.toResize),$(window).bind("scroll",App.Model.Public.toScroll),App.router.bind("change",App.Model.Public.toBrowseHistory),App.router.navigate("home");var a=0;setTimeout(function(){App.Model.Public.resize(),$(".start a").bind("click",App.Model.Public.onGoTo),$("ul.nav a").bind("click",App.Model.Public.onGoTo),$(".elements").bind("click",App.Model.Public.onClickElement),$(".contact").appendTo("#contactanos")},100),setInterval(function(){var b=0==a?".cloud-clone":"#cloud"+a,c=App.Model.Public.width<=640?2:5;c>a&&(a++,$(b).clone().appendTo("home-module").attr("id","cloud"+a)),App.Model.Public.animateCloud("#cloud"+_.random(1,a))},7e3)},animateCloud:function(a){var b=App.Model.Public.width<=640?{inf:0,sup:40}:{inf:40,sup:100};$(a).css("zoom",_.random(b.inf,b.sup)/100),$(a).css("top",_.random(0,App.Model.Public.height)),$(a).fadeIn("slow"),$(a).animate({left:_.random(0,App.Model.Public.width),opacity:_.random(40,80)/100},5e3,"linear")},resize:function(){if(App.Model.Public.set("width",window.innerWidth),App.Model.Public.set("height",window.innerHeight),window.innerHeight>window.innerWidth)App.Model.Public.showWindow("Rote su dispositivo horizontalmente","<br>");else{var a=window.innerWidth*window.innerHeight,b=a>App.Model.Public.area?"115%":kendo.toString(window.innerWidth*window.innerHeight/App.Model.Public.area,"##%");App.Model.Public.set("scale",b),$(".background").css("background-size","115%"),$(".elements").css("background-size","115%")}},settings:function(){var a=_.sortBy(App.source.data(),function(a){return parseInt(a.position)});App.Model.Public.resize(),App.Model.Public.parallax.source.data(a),App.Model.Public.set("menu.data",_.filter(a,function(a){return 1!=parseInt(a.position)})),App.Model.Public.set("start.html",a[0].content),App.Model.Public.set("start.src",a[0].start),App.Model.Public.set("taxi.src",'url("'+a[0].taxi+'")'),App.Model.Public.set("detail.cloud",a[0].cloud),App.Model.Public.set("socialNetworks.facebook.src",'url("'+a[11].socialNetworks.facebook.src+'") no-repeat'),App.Model.Public.set("socialNetworks.facebook.url",a[11].socialNetworks.facebook.url),App.Model.Public.set("socialNetworks.twitter.src",'url("'+a[11].socialNetworks.twitter.src+'") no-repeat'),App.Model.Public.set("socialNetworks.twitter.url",a[11].socialNetworks.twitter.url),App.Model.Public.set("socialNetworks.instagram.src",'url("'+a[11].socialNetworks.instagram.src+'") no-repeat'),App.Model.Public.set("socialNetworks.instagram.url",a[11].socialNetworks.instagram.url)},setNavbar:function(){$(".navbar-twitch-toggle").on("click",function(a){a.preventDefault(),$(".navbar-twitch").toggleClass("open")}),$(".nav-style-toggle").on("click",function(a){a.preventDefault();var b=$(".nav-style-toggle.disabled");$(this).addClass("disabled"),b.removeClass("disabled"),$(".navbar-twitch").removeClass("navbar-"+b.data("type")),$(".navbar-twitch").addClass("navbar-"+$(this).data("type"))})},showWindow:function(a,b,c){App.Model.Public.set("modal.title",a),App.Model.Public.set("modal.body",b),App.Model.Public.set("modal.footer",c),$("#appModal").modal(),$(".modal-body").find("[rel='nofollow']").bind("click",function(a){a.preventDefault();var b="#"+$(".modal-body").find("[rel='nofollow']").attr("href").split("#")[1];App.router.navigate(b),$("#appModal").modal("hide")})},onContact:function(a){a.preventDefault();var b=!0;if(_.each($(".form-control"),function(a){b&=a.validity.valid,$(a).tooltip(a.validity.valid?"hide":"show")}),b){var c={to:"info@hypeideas.co",from:App.Model.Public.contact.email,names:App.Model.Public.contact.names,subject:"Solicitud["+App.Model.Public.contact.email+"]",body:App.Model.Public.contact.message};App.Model.Public.set("response.state","alert-info"),App.Model.Public.set("response.text","¡estamos enviando tu mensaje!"),$(".alert").fadeIn(5e3),$.ajax({type:"GET",crossDomain:!0,url:config.endpoint,data:c}).done(function(a){App.Model.Public.set("response.text",a.response),App.Model.Public.set("response.state","alert-info"),$(".alert").fadeOut(5e3)}).error(function(a){App.Model.Public.set("response.text",a),App.Model.Public.set("response.state","alert-danger"),$(".alert").fadeOut(5e3)})}return!1},onBack:function(){App.Model.Public.set("parallax.isVisible",!0),App.Model.Public.set("taxi.isVisible",!0),App.Model.Public.set("menu.isVisible",!0),App.Model.Public.set("detail.isVisible",!1),App.router.navigate("welcome"),App.router.navigate(App.Model.Public.selectedItem.anchor)},onClickElement:function(){App.Model.Public.set("parallax.isVisible",!1),App.Model.Public.set("taxi.isVisible",!1),App.Model.Public.set("menu.isVisible",!1),App.Model.Public.set("detail.isVisible",!0),$("body").scrollTop(0)},onClickToggle:function(){var a="nav-open"==App.Model.Public.stateButton.split(" ")[1],b="glyphicon-chevron-",c=b+"right nav-open",d=b+"left nav-close";App.Model.Public.set("stateButton",a?d:c),$(".navbar-twitch").toggleClass("open")},onGoTo:function(){var a=$(this);App.Model.Public.set("animated.isComplete",!1),$("html, body").stop().animate({scrollTop:$(a.attr("href")).offset().top},1500,function(){App.Model.Public.set("animated.isComplete",!0)})},onChangeEmail:function(a){App.Model.Public.set("contact.email",a.currentTarget.value)},toBrowseHistory:function(a){var b="contactanos"==a.url,c="home"!=a.url;c&&App.history.push(a.url),App.Model.Public.set("menu.isVisible",c),App.Model.Public.set("start.isVisible",!c),App.Model.Public.set("taxi.isVisible","nuestros-clientes"!=a.url&&!b),App.Model.Public.set("socialNetworks.isVisible",b),App.Model.Public.set("contact.isVisible",b),App.Model.Public.resize()},toResize:function(){App.Model.Public.resize()},toScroll:function(){if(App.Model.Public.parallax.isVisible){var a=$(window).scrollTop()/window.innerHeight,b=Math.round(a)==Math.ceil(a),c=null;b&&(c=App.Model.Public.parallax.source.data()[Math.round(a)],App.Model.Public.set("selectedItem.anchor",c.anchor),App.Model.Public.set("selectedItem.content",c.content),App.Model.Public.set("selectedItem.icon",c.icon),App.Model.Public.set("selectedItem.label",c.label),App.Model.Public.set("selectedItem.thumbnails",c.thumbnails),App.Model.Public.animated.isComplete&&App.router.navigate(c.anchor))}}});